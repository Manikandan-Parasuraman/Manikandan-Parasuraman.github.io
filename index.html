<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manikandan P | Hub</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Space+Grotesk:wght@500;700;800&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="css/style.css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>

<body>
    <!-- Futuristic Background Elements -->
    <div class="bg-decoration">
        <div class="node node-1">{ }</div>
        <div class="node node-2">AI</div>
        <div class="node node-3">[ ]</div>
        <div class="node node-4">01</div>
    </div>

    <!-- Login Gate -->
    <div id="login-gate" class="login-gate">
        <div class="login-box">
            <div class="login-avatar">
                <img src="images/logo.png" alt="Company Logo" id="login-logo">
            </div>
            <h2>Engineering Intelligent Systems</h2>
            <p>Continue with Google to access my distributed backend projects, GenAI experiments, and technical research
                insights.</p>
            <div id="buttonDiv"></div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/script.js"></script>
    <script>
        // IMMEDIATE REDIRECT: If already logged in, go to resume.html right away
        if (sessionStorage.getItem('isLoggedIn')) {
            window.location.href = 'resume.html';
        }

        // Wait for both DOM and potential script load
        window.addEventListener('load', initGoogleAuth);

        // Initialize Google Login Configuration
        const CLIENT_ID = CONFIG.GOOGLE_CLIENT_ID;

        function handleCredentialResponse(response) {
            // Store session and redirect
            sessionStorage.setItem('isLoggedIn', 'true');
            window.location.href = 'resume.html';
        }

        function initGoogleAuth() {
            // Check if the Google Client library is ready and button div exists
            if (typeof google !== 'undefined' && google.accounts && document.getElementById("buttonDiv")) {
                const CLIENT_ID = CONFIG.GOOGLE_CLIENT_ID;

                google.accounts.id.initialize({
                    client_id: CLIENT_ID,
                    callback: handleCredentialResponse
                });

                google.accounts.id.renderButton(
                    document.getElementById("buttonDiv"),
                    { theme: "filled_blue", size: "large", text: "continue_with", shape: "pill" }
                );
            } else {
                // Not ready? Try again in 200ms
                setTimeout(initGoogleAuth, 200);
            }
        }
    </script>
</body>

</html>